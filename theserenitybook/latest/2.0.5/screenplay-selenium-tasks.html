<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Screenplay Selenium Webdriver tasks :: The Serenity BDD Book</title>
    <meta name="generator" content="Antora 1.0.1">
    <link rel="stylesheet" href="../../_/css/site.css">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <a class="navbar-item" href="../..">The Serenity BDD Book</a>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <a class="navbar-item" href="#">Home</a>
        <a class="navbar-item" href="https://github.com/serenity-bdd/serenity-core/issues">Issues</a>
        <a class="navbar-item" href="https://github.com/serenity-bdd/serenity-core">Source Code on Github</a>
        <a class="navbar-item" href="https://johnfergusonsmart.com/serenity-bdd-mentoring/">Serenity Support</a>
        <a class="navbar-item" href="https://serenitydojo.teachable.com">Serenity Online Training</a>

        <!-- <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Resources</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" href="#">Resource A</a>
            <a class="navbar-item" href="#">Resource B</a>
            <a class="navbar-item" href="#">Resource C</a>
          </div>
        </div> -->
        <!-- <div class="navbar-item">
          <span class="control">
            <a class="button is-primary" href="#">Download</a>
          </span>
        </div> -->
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="theserenitybook" data-version="2.0.5">
  <aside class="navigation" role="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="index.html">The Serenity Book</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serenity BDD Fundamentals</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="index.html">Introduction to Serenity BDD</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="getting-started.html">Getting Started</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="first-steps.html">First Steps</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="step-libraries.html">Working with Step Libraries</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Testing Web Applications</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="web-testing-in-serenity.html">Testing Web Applications</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="page-objects.html">Working with Page Objects</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="angularjs.html">Testing AngularJS applications</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serenity with JUnit</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="junit-basic.html">JUnit Basic Integration</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="junit.html">JUnit WebDriver Support</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="junit-skipping.html">Skipping Tests</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="junit-data-driven.html">Data Driven Tests</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="junit-requirements.html">Modelling JUnit Requirements</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serenity with BDD Frameworks</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="jbehave.html">Working with JBehave</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="cucumber.html">Working with Cucumber JVM</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Working with REST APIs</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="serenity-rest.html">REST API Testing in Serenity</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Serenity and the Screenplay Pattern</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="serenity-screenplay.html">Screenplay Fundamentals</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link" href="screenplay-selenium-tasks.html">Web Testing with Screenplay</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="serenity-screenplay-rest.html">REST API Testing with Screenplay</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Reporting and Living documentation</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="living-documentation.html">Living Documentation</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="extended-reports.html">Additional Reports</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Running Serenity tests</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="serenity-parallel.html">Running Serenity tests in parallel</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-toggle"></button>
    <span class="nav-text">Reference</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="glossary.adoc">Glossary</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">The Serenity Book</span>
    <span class="version">2.0.5</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">The Serenity Book</span>
      <ul class="versions">
        <li class="version is-current is-latest">
          <a href="index.html">2.0.5</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main" role="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
<nav class="crumbs" role="navigation" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="index.html">The Serenity Book</a></li>
    <li class="crumb">Serenity and the Screenplay Pattern</li>
    <li class="crumb"><a href="screenplay-selenium-tasks.html">Web Testing with Screenplay</a></li>
  </ul>
</nav>
  <div class="edit-this-page"><a href="file:///Users/john/Projects/OpenSource/the-serenity-book/modules/ROOT/pages/screenplay-selenium-tasks.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>Screenplay Selenium Webdriver tasks</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Serenity provides a large number of built-in Screenplay tasks that make interacting with a web application quicker and easier to write. In this chapter, we will look at everything you need to know to write web tests with Serenity Screenplay.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_screenplay_webdriver_abilities"><a class="anchor" href="#_screenplay_webdriver_abilities"></a>Screenplay WebDriver abilities</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Before a Screenplay actor can interact with a web page, we need to give them a WebDriver instance to work with. You do this with the <code>BrowseTheWeb</code> ability. In a JUnit test, this code could look like the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Managed
WebDriver driver;
...
Actor sam = Actor.named("Sam");
sam.can(BrowseTheWeb.with(driver));</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you are using Cucumber, Serenity will manage the WebDriver instances for you. You just need to define a <code>Cast</code> object, whose job it is to provide actors to the scenarios. A simple approach is to use the <code>OnlineCast</code>, which returns actors who can all browse the web with the default browser:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Before
public void setTheStage() {
    OnStage.setTheStage(new OnlineCast());
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code>whereEveryoneCan</code> method to provide additionla abilities, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@Before
public void setTheStage() {
    OnStage.setTheStage(
        OnlineCast.whereEveryoneCan(
            CallAnApi.at("http://my.server.endpoint")
        )
    );
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This will provide actors who can both use WebDriver tasks and RestAssured tasks.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_opening_a_web_page"><a class="anchor" href="#_opening_a_web_page"></a>Opening a web page</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In Screenplay, you open a new page using the <code>Open</code> interaction. This can work with a URL, e.g:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(Open.url("https://google.com"));</code></pre>
</div>
</div>
<div class="paragraph">
<p>If you have defined a Page Object with a default url, you can open a page object:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@DefaultUrl("https://google.com")
public class GooglePage extends PageObject {}
...

GooglePage googlePage;
...
sam.attemptsTo(Open.browserOn().the(googlePage));</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or you can use the class directly, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(Open.browserOn().the(GooglePage.class));</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_simple_webdriver_interactions"><a class="anchor" href="#_simple_webdriver_interactions"></a>Simple WebDriver interactions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Common WebDriver actions are represented by their own Interaction classes in Serenity Screenplay.</p>
</div>
<div class="sect2">
<h3 id="_clicking_on_an_element"><a class="anchor" href="#_clicking_on_an_element"></a>Clicking on an element</h3>
<div class="paragraph">
<p>The <code>Click</code> interaction class allows you to perform a WebDriver click on an element.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Target SUBMIT_BUTTON = Target.the("Submit button").located(By.cssSelector("input[value='Go']"))

sam.attemptsTo(Click.on(SUBMIT_BUTTON));</code></pre>
</div>
</div>
<div class="paragraph">
<p>In addition to a <code>Target</code> object, the <code>Click.on(&#8230;&#8203;)</code> method lets you click on a <code>By</code> locator, an XPath or CSS expression in String form, or a <code>WebElementFacade</code>. For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(Click.on(By.cssSelector("input[value='Go']")));

sam.attemptsTo(Click.on("#submit-button"));

WebElementFacade submitButton = find(By.cssSelector("input[value='Go']"));
sam.attemptsTo(Click.on(submitButton));</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also provide a list of locators, to progressively narrow down the search. For example, the following will click on the link with the text "Accounts" inside the main menu element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(Click.on(By.cssSelector("#mainMenu"), By.linkText("Accounts")));</code></pre>
</div>
</div>
<div class="paragraph">
<p>As with a standard Serenity click operation, if the target is a form element (<code>input</code>, <code>button</code>, <code>select</code>, <code>textarea</code>, <code>link</code>, <code>option</code>), Serenity will wait until the element is enabled before clicking.</p>
</div>
</div>
<div class="sect2">
<h3 id="_typing_values_into_fields"><a class="anchor" href="#_typing_values_into_fields"></a>Typing values into fields</h3>
<div class="paragraph">
<p>To type values into fields (where a conventional Selenium test would use the <code>sendKeys()</code> method), you use the <code>Enter</code> interaction class. The <code>Enter</code> class uses a simple DSL</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Target NEW_TODO = Target.the("New Todo input field").locatedBy(".new-todo");

sam.attemptsTo(
    Enter.theValue("Walk the dog").into(NEW_TODO)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also use the <code>thenHit()</code> method as a convenience to enter a text value and then send an individual key to the same element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(
    Enter.theValue("Walk the dog").into(NEW_TODO).thenHit(Keys.ENTER)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Serenity waits until a field is enabled before typing a value into the field, and clear the field beforehand. For some UIs, this may not be necessary, or may even interfer with the screen behaviour. To precisely replicate the WebDriver <code>sendKeys()</code> behaviour, you can use the <code>keyValues()</code> method instead of <code>enterValues()</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(
    Enter.keyValues("Walk the dog").into(NEW_TODO)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_hitting_a_key"><a class="anchor" href="#_hitting_a_key"></a>Hitting a key</h3>
<div class="paragraph">
<p>If you just want to hit a single key into a field, you can also use the <code>Hit</code> interaction class. This class also uses <code>sendKeys()</code> under the hood, but can sometimes be more readable:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(
    Hit.the(Keys.ENTER).into(NEW_TODO)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or (for equivalent results):</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Target SELECT_CITY = Target.the("City dropdown").locatedBy(".city-selection-list");

sam.attemptsTo(
    Hit.the(Keys.ARROW_DOWN).keyIn(SELECT_CITY)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_working_with_dropdowns"><a class="anchor" href="#_working_with_dropdowns"></a>Working with dropdowns</h3>
<div class="paragraph">
<p>We can use the <code>SelectFromOptions</code> interaction to select a value in a dropdown list, either by value, by visible text, or by index. An example is shown below:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(
    SelectFromOptions.byVisibleText("Paris").from(SELECT_CITY)
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_moving_the_mouse"><a class="anchor" href="#_moving_the_mouse"></a>Moving the mouse</h3>
<div class="paragraph">
<p>Some tests need us to hover over an element, for example to display a menu or icon. In Serenity Screenplay you can use the <code>MoveMouse</code> interaction class to do this. Like the other interaction classes, this will work with an element, an XPath or CSS selector, a locator or a sequence of locators.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">Target PROFILE_BUTTON = Target.the("Profile Button").locatedBy("#profile");

sam.attemptsTo(
    MoveMouse.to(PROFILE_BUTTON)
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Often when we move the mouse over an element, we want to perform another action afterwards. The <code>MoveMouse</code> interaction class lets us do this using the <code>andThen()</code> method, which takes a lambda expression as a parameter. The lambda takes an <code>Actions</code> object as a parameter, which can be used to define subsequent actions. For example to move over a button and then doubleclick, we could write the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(
    MoveMouse.to(PROFILE_BUTTON).andThen( actions -&gt; actions.doubleClick() )
);</code></pre>
</div>
</div>
<div class="paragraph">
<p>Or we could shorten the code to a method reference:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(
    MoveMouse.to(PROFILE_BUTTON).andThen( Actions::doubleClick() )
);</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_javascript_clicks"><a class="anchor" href="#_javascript_clicks"></a>JavaScript Clicks</h3>
<div class="paragraph">
<p>On some sites, a normal WebDriver click does not work, and we need to use JavaScript directly. We can do this using the <code>JavaScriptClick</code> interaction class. This has an identical usage as <code>Click</code>, as shown here:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(JavaScriptClick.on(SUBMIT_BUTTON));</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_scrolling"><a class="anchor" href="#_scrolling"></a>Scrolling</h3>
<div class="paragraph">
<p>The <code>ScrollTo</code> interaction class lets you scroll to a specified element:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(Scroll.to(SUBMIT_BUTTON));</code></pre>
</div>
</div>
<div class="paragraph">
<p>You can also specify whether to align the scrolling with the top or bottom of the target element by <code>andAlignToTop()</code> and <code>andAlignToBottom()</code> methods:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(Scroll.to(SUBMIT_BUTTON).andAlignToTop());</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_switching_frames"><a class="anchor" href="#_switching_frames"></a>Switching Frames</h3>
<div class="paragraph">
<p>You can switch to another window or frame using the <code>Switch</code> interaction, e.g.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(Switch.toFrame(2));</code></pre>
</div>
</div>
<div class="paragraph">
<p>This works for all of the <code>WebDriver</code> <em>switchTo()</em> methods. For example to switch to an alert:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(Switch.toAlert());</code></pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="_writing_custom_interaction_classes"><a class="anchor" href="#_writing_custom_interaction_classes"></a>Writing custom interaction classes</h3>
<div class="paragraph">
<p>It is easy to write your own interaction class using the <code>BrowseTheWeb</code> ability.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_querying_a_web_ui"><a class="anchor" href="#_querying_a_web_ui"></a>Querying a web UI</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Serenity Screenplay also gives you a large number of options when it comes to querying a web UI. Most involve special types of <code>Question</code> class. We look at these in this section.</p>
</div>
<div class="sect2">
<h3 id="_reading_the_value_of_a_field"><a class="anchor" href="#_reading_the_value_of_a_field"></a>Reading the value of a field</h3>
<div class="paragraph">
<p>Reading a value from an element is one of the most common ways we interact with a web page.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">sam.attemptsTo(Switch.toAlert());</code></pre>
</div>
</div>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>This page was built using the Antora default UI.</p>
  <p>The source code for this UI is licensed under the terms of the MPL-2.0 license.</p>
</footer>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
